### Overview

- [扩展文件(Extension Files)](#扩展文件(Extension-Files))
  - [文件引用(Referring to files)](#文件引用(Referring-to-files))
- [架构(Architecture)](#架构(architecture))


扩展是 web 平台中使用的 HTML、CSS、JavaScript、图像和其他文件的压缩包，用于定制 Google Chrome 的浏览体验。扩展是使用 web 技术构建的，可以使用浏览器提供给开放 web 的相同 api。

> Extensions are zipped bundles of HTML, CSS, JavaScript, images, and other files used in the web platform, that customize the Google Chrome browsing experience. Extensions are built using web technology and can use the same APIs the browser provides to the open web.

扩展具有广泛的功能可塑性。它们可以修改用户看到的 web 内容，并与浏览器进行交互、扩展和更改浏览器本身的行为。

> Extensions have a wide range of functional possibilities. They can modify web content users see and interact with or extend and change the behavior of the browser itself.

扩展被看作是 Chrome 打造成最个性化浏览器的大门.

> Consider extensions the gateway to making the Chrome browser the most personalized browser.

#### 扩展文件(Extension Files)

扩展名在文件类型和目录数量上有所不同，但它们都需要有清单。一些基本但有用的扩展可能只包含清单及其工具栏图标。

> Extensions vary in types of files and amount of directories, but they are all required to have a **manifest**. Some basic, but useful, extensions may consist of just the manifest and its toolbar icon.

名为 manifest.json 的清单文件向浏览器提供有关扩展名的信息，例如最重要的文件和扩展名可能使用的功能。

> The manifest file, titled **manifest.json**, gives the browser information about the extension, such as the most important files and the capabilities the extension might use.

```json
{
  "name": "My Extension",
  "version": "2.1",
  "description": "Gets information from Google.",
  "icons": {
    "128": "icon_16.png",
    "128": "icon_32.png",
    "128": "icon_48.png",
    "128": "icon_128.png"
  },
  "background": {
    "persistent": false,
    "scripts": ["background_script.js"]
  },
  "permissions": ["https://*.google.com/", "activeTab"],
  "browser_action": {
    "default_icon": "icon_16.png",
    "default_popup": "popup.html"
  }
}
```

扩展必须有一个位于浏览器工具栏中的图标。工具栏图标允许简单的访问并让用户知道安装了哪些扩展。大多数用户将通过点击图标使用弹窗来和扩展进行交互。

> Extensions must have an icon that sits in the browser toolbar. Toolbar icons allow easy access and keep users aware of which extensions are installed. Most users will interact with an extension that uses a popup by clicking on the icon.

|                                                                            |                                                                    |
| -------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| ![](https://developer.chrome.com/static/images/overview/browser_arrow.png) | ![](https://developer.chrome.com/static/images/overview/mappy.png) |
| This Google Mail Checker extension uses a browser action.                  | This Mappy extension uses a page action and content script.        |

##### 文件引用(Referring to files)

扩展的文件可以通过使用相对路径来引用，就像普通 HTML 页面中的文件一样。

> An extension's files can be referred to by using a relative URL, just as files in an ordinary HTML page.

```html
<img src="images/my_image.png" />
```
此外，每个文件也可以使用绝对路径进行入访问
>Additionally, each file can also be accessed using an absolute URL.

```
chrome-extension://<extensionID>/<pathToFile>
```

在绝对路径中，*\<extensionID\>* 是扩展系统为每个扩展生成的唯一标识符。可以通过转到URL chrome://extensions查看所有加载的扩展的id。*\<pathToFile\>* 是文件在扩展名顶级文件夹下的位置；它与相对路径匹配。
>In the absolute URL, the *\<extensionID\>* is a unique identifier that the extension system generates for each extension. The IDs for all loaded extensions can be viewed by going to the URL **chrome://extensions** . The *\<pathToFile\>* is the location of the file under the extension's top folder; it matches the relative URL.

在处理未打包的扩展时，扩展标识可以更改。特别是，如果扩展是从不同的目录加载的，则解包扩展的ID将更改；当扩展被打包时，ID将再次更改。如果扩展的代码依赖于绝对URL，那么它可以使用chrome.runtime.getURL（）方法来避免在开发期间硬编码ID。
>While working on an unpacked extension the extension ID can change. Specifically, the ID of an unpacked extension will change if the extension is loaded from a different directory; the ID will change again when the extension is packaged. If an extension's code relies on an absolute URL, it can use the **chrome.runtime.getURL()** method to avoid hardcoding the ID during development.

#### 架构(architecture)

扩展的体系结构将取决于其功能，但许多健壮的扩展将包括多个组件：
>An extension’s architecture will depend on its functionality, but many robust extensions will include multiple components:
- 📝 Manifest
- [Background Script](#Background-Script)
- [UI Elements](#UI-Elements)
- [Content Script](#Content-Script)
- [Options Page](#Options-Page)

##### Background Script
##### UI Elements
##### Content Script
##### Options Page